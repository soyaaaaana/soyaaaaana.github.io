function encodeHTML(e){let t=document.createElement("div");t.appendChild(document.createTextNode(e));let r=t.innerHTML;return t.remove(),r}function decodeHTML(e){let t=document.createElement("div");t.innerHTML=e;let r=t.innerText;return t.remove(),r}async function show(){progress_start();let e=[],t=[],r=[],o=[],n=[],a=[],l=0;await fetch(`https://api.twitterpicker.com/tweet/datav3?id=${document.querySelector(".tweet_id").value}`,{mode:"no-cors"}).then(async e=>{await e.text().then(e=>{let t=e?JSON.parse(e):{};l=t.retweet_count,console.log(t),console.log(l)})}).catch(e=>{progress_end(),console.error("There was a problem with the fetch operation: ",e)}),console.log(l),document.querySelector(".tweet_detail").textContent=`RT数: ${l}`,await fetch(`https://api.twitterpicker.com/tweet/retweets?id=${document.querySelector(".tweet_id").value}`,{mode:"no-cors"}).then(e=>e.json()).then(l=>{resolve(l?JSON.parse(l):{});for(let c=0;c<l.length;c++)e.push(l[c].user_id),t.push(l[c].tweet_id),r.push(l[c].handle),o.push(l[c].name),n.push(l[c].timestamp),a.push(l[c].image)}).catch(e=>{console.error("There was a problem with the fetch operation: ",e),progress_end()});let c="<hr>";for(let l=0;l<e.length;l++)c+=`<div style="display:flex;flex-direction:row"><div style="display:flex;align-items:center;margin-right:1em"><img src="${encodeHTML(a[l].replace("_normal.","."))}" style="width:5em;height:5em;border-radius:50%;"></div><div style="display:flex;flex-direction:column">名前: ${encodeHTML(o[l])}<br>RTした時刻: ${encodeHTML(new Date(n[l]).toLocaleDateString("ja-JP"))} ${encodeHTML(new Date(n[l]).toLocaleTimeString("ja-JP"))}<br>ハンドル: @${encodeHTML(r[l])}<br>user_id: ${encodeHTML(e[l])}<br>RTのURL: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="https://x.com/i/status/${encodeHTML(t[l])}" target="_blank" rel="noopener noreferrer">https://x.com/i/status/${encodeHTML(t[l])}</a>プロフィール画像: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="${encodeHTML(a[l].replace("_normal.","."))}" target="_blank" rel="noopener noreferrer">${encodeHTML(a[l].replace("_normal.","."))}</a></div></div><hr>`;document.querySelector(".data").innerHTML=c,progress_end()}function progress_end(){document.querySelector(".progress").setAttribute("style","display:none")}function progress_start(){document.querySelector(".progress").setAttribute("style","display:block")}
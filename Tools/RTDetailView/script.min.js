function encodeHTML(e){let t=document.createElement("div");t.appendChild(document.createTextNode(e));let r=t.innerHTML;return t.remove(),r}function decodeHTML(e){let t=document.createElement("div");t.innerHTML=e;let r=t.innerText;return t.remove(),r}async function show(){progress_start();let e=[],t=[],r=[],o=[],n=[],a=[],s=0;await fetch(`https://api.twitterpicker.com/tweet/datav3?id=${document.querySelector(".tweet_id").value}`,{mode:"cors"}).then(e=>{if(!e.ok)throw progress_end(),new Error;return e.json()}).then(e=>{s=e.retweet_count}).catch(e=>{progress_end(),console.error("There was a problem with the fetch operation: ",e)}),document.querySelector(".tweet_detail").textContent=`RT数: ${s}`,await fetch(`https://api.twitterpicker.com/tweet/retweets?id=${document.querySelector(".tweet_id").value}`,{mode:"cors"}).then(e=>{if(!e.ok)throw progress_end(),new Error;return e.json()}).then(s=>{for(let c=0;c<s.length;c++)e.push(s[c].user_id),t.push(s[c].tweet_id),r.push(s[c].handle),o.push(s[c].name),n.push(s[c].timestamp),a.push(s[c].image)}).catch(e=>{console.error("There was a problem with the fetch operation: ",e),progress_end()});let c="<hr>";for(let s=0;s<e.length;s++)c+=`<div style="display:flex;flex-direction:row"><div style="display:flex;align-items:center;margin-right:1em"><img src="${encodeHTML(a[s].replace("_normal.","."))}" style="width:5em;height:5em;border-radius:50%;"></div><div style="display:flex;flex-direction:column">名前: ${encodeHTML(o[s])}<br>RTした時刻: ${encodeHTML(new Date(n[s]).toLocaleDateString("ja-JP"))} ${encodeHTML(new Date(n[s]).toLocaleTimeString("ja-JP"))}<br>ハンドル: @${encodeHTML(r[s])}<br>user_id: ${encodeHTML(e[s])}<br>RTのURL: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="https://x.com/i/status/${encodeHTML(t[s])}" target="_blank" rel="noopener noreferrer">https://x.com/i/status/${encodeHTML(t[s])}</a>プロフィール画像: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="${encodeHTML(a[s].replace("_normal.","."))}" target="_blank" rel="noopener noreferrer">${encodeHTML(a[s].replace("_normal.","."))}</a></div></div><hr>`;document.querySelector(".data").innerHTML=c,progress_end()}function progress_end(){document.querySelector(".progress").setAttribute("style","display:none")}function progress_start(){document.querySelector(".progress").setAttribute("style","display:block")}
function encodeHTML(e){let t=document.createElement("div");t.appendChild(document.createTextNode(e));let r=t.innerHTML;return t.remove(),r}function decodeHTML(e){let t=document.createElement("div");t.innerHTML=e;let r=t.innerText;return t.remove(),r}async function show(){progress_start();let e=[],t=[],r=[],o=[],n=[],a=[],l=0;await fetch(`https://api.twitterpicker.com/tweet/datav3?id=${document.querySelector(".tweet_id").value}`).then(e=>{if(!e.ok)throw progress_end(),new Error;return e.json()}).then(e=>{l=e.retweet_count}).catch(e=>{progress_end(),console.error("There was a problem with the fetch operation: ",e)}),document.querySelector(".tweet_detail").textContent=`RT数: ${l}`,await fetch(`https://api.twitterpicker.com/tweet/retweets?id=${document.querySelector(".tweet_id").value}`).then(e=>{if(!e.ok)throw progress_end(),new Error;return e.json()}).then(l=>{for(let s=0;s<l.length;s++)e.push(l[s].user_id),t.push(l[s].tweet_id),r.push(l[s].handle),o.push(l[s].name),n.push(l[s].timestamp),a.push(l[s].image)}).catch(e=>{console.error("There was a problem with the fetch operation: ",e),progress_end()});let s="<hr>";for(let l=0;l<e.length;l++)s+=`<div style="display:flex;flex-direction:row"><div style="display:flex;align-items:center;margin-right:1em"><img src="${encodeHTML(a[l].replace("_normal.","."))}" style="width:5em;height:5em;border-radius:50%;"></div><div style="display:flex;flex-direction:column">名前: ${encodeHTML(o[l])}<br>RTした時刻: ${encodeHTML(new Date(n[l]).toLocaleDateString("ja-JP"))} ${encodeHTML(new Date(n[l]).toLocaleTimeString("ja-JP"))}<br>ハンドル: @${encodeHTML(r[l])}<br>user_id: ${encodeHTML(e[l])}<br>RTのURL: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="https://x.com/i/status/${encodeHTML(t[l])}" target="_blank" rel="noopener noreferrer">https://x.com/i/status/${encodeHTML(t[l])}</a>プロフィール画像: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="${encodeHTML(a[l].replace("_normal.","."))}" target="_blank" rel="noopener noreferrer">${encodeHTML(a[l].replace("_normal.","."))}</a></div></div><hr>`;document.querySelector(".data").innerHTML=s,progress_end()}function progress_end(){document.querySelector(".progress").setAttribute("style","display:none")}function progress_start(){document.querySelector(".progress").setAttribute("style","display:block")}
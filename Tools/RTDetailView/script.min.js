function encodeHTML(e){let t=document.createElement("div");t.appendChild(document.createTextNode(e));let r=t.innerHTML;return t.remove(),r}function decodeHTML(e){let t=document.createElement("div");t.innerHTML=e;let r=t.innerText;return t.remove(),r}async function show(){progress_start();let e=[],t=[],r=[],o=[],n=[],a=[],c=0;await fetch(`https://api.twitterpicker.com/tweet/datav3?id=${document.querySelector(".tweet_id").value}`,{mode:"cors"}).then(e=>e.json()).then(e=>{c=e.retweet_count}).catch(e=>{progress_end(),console.error("There was a problem with the fetch operation: ",e)}),document.querySelector(".tweet_detail").textContent=`RT数: ${c}`,await fetch(`https://api.twitterpicker.com/tweet/retweets?id=${document.querySelector(".tweet_id").value}`,{mode:"cors"}).then(e=>{if(!e.ok)throw progress_end(),new Error;return e.json()}).then(c=>{for(let l=0;l<c.length;l++)e.push(c[l].user_id),t.push(c[l].tweet_id),r.push(c[l].handle),o.push(c[l].name),n.push(c[l].timestamp),a.push(c[l].image)}).catch(e=>{console.error("There was a problem with the fetch operation: ",e),progress_end()});let l="<hr>";for(let c=0;c<e.length;c++)l+=`<div style="display:flex;flex-direction:row"><div style="display:flex;align-items:center;margin-right:1em"><img src="${encodeHTML(a[c].replace("_normal.","."))}" style="width:5em;height:5em;border-radius:50%;"></div><div style="display:flex;flex-direction:column">名前: ${encodeHTML(o[c])}<br>RTした時刻: ${encodeHTML(new Date(n[c]).toLocaleDateString("ja-JP"))} ${encodeHTML(new Date(n[c]).toLocaleTimeString("ja-JP"))}<br>ハンドル: @${encodeHTML(r[c])}<br>user_id: ${encodeHTML(e[c])}<br>RTのURL: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="https://x.com/i/status/${encodeHTML(t[c])}" target="_blank" rel="noopener noreferrer">https://x.com/i/status/${encodeHTML(t[c])}</a>プロフィール画像: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="${encodeHTML(a[c].replace("_normal.","."))}" target="_blank" rel="noopener noreferrer">${encodeHTML(a[c].replace("_normal.","."))}</a></div></div><hr>`;document.querySelector(".data").innerHTML=l,progress_end()}function progress_end(){document.querySelector(".progress").setAttribute("style","display:none")}function progress_start(){document.querySelector(".progress").setAttribute("style","display:block")}
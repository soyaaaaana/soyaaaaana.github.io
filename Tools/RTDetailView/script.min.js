function encodeHTML(e){let t=document.createElement("div");t.appendChild(document.createTextNode(e));let r=t.innerHTML;return t.remove(),r}function decodeHTML(e){let t=document.createElement("div");t.innerHTML=e;let r=t.innerText;return t.remove(),r}async function show(){progress_start();let e=document.querySelector(".tweet_id").value,t=[],r=[],o=[],n=[],c=[],l=[],s=0;await fetch(`https://script.google.com/macros/s/AKfycbzMLZbOYraHk7lxFEocJlIUSO-lxOPoj5zLbC1ETCGMWYVw4G14CxJDF4Yhu4SNnGhqZQ/exec?type=tweet&id=${e}`).then(e=>{if(!e.ok)throw progress_end(),new Error;return e.text()}).then(e=>{e=e?JSON.parse(e):{},s=e.retweet_count,console.log(e)}).catch(e=>{progress_end(),console.error("There was a problem with the fetch operation: ",e)}),document.querySelector(".tweet_detail").textContent=`RT数: ${s}`,await fetch(`https://script.google.com/macros/s/AKfycbzMLZbOYraHk7lxFEocJlIUSO-lxOPoj5zLbC1ETCGMWYVw4G14CxJDF4Yhu4SNnGhqZQ/exec?id=${e}`).then(e=>{if(!e.ok)throw progress_end(),new Error;return e.text()}).then(e=>{e=e?JSON.parse(e):{};for(let s=0;s<e.length;s++)t.push(e[s].user_id),r.push(e[s].tweet_id),o.push(e[s].handle),n.push(e[s].name),c.push(e[s].timestamp),l.push(e[s].image);console.log(e)}).catch(e=>{console.error("There was a problem with the fetch operation: ",e),progress_end()});let a="<hr>";for(let e=0;e<t.length;e++)a+=`<div style="display:flex;flex-direction:row"><div style="display:flex;align-items:center;margin-right:1em"><img src="${encodeHTML(l[e].replace("_normal.","."))}" style="width:5em;height:5em;border-radius:50%;"></div><div style="display:flex;flex-direction:column">名前: ${encodeHTML(n[e])}<br>RTした時刻: ${encodeHTML(new Date(c[e]).toLocaleDateString("ja-JP"))} ${encodeHTML(new Date(c[e]).toLocaleTimeString("ja-JP"))}<br>ハンドル: @${encodeHTML(o[e])}<br>user_id: ${encodeHTML(t[e])}<br>RTのURL: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="https://x.com/i/status/${encodeHTML(r[e])}" target="_blank" rel="noopener noreferrer">https://x.com/i/status/${encodeHTML(r[e])}</a>プロフィール画像: <a class="cp_link1" style="word-break:keep-all;overflow-wrap:anywhere;" href="${encodeHTML(l[e].replace("_normal.","."))}" target="_blank" rel="noopener noreferrer">${encodeHTML(l[e].replace("_normal.","."))}</a></div></div><hr>`;document.querySelector(".data").innerHTML=a,progress_end()}function progress_end(){document.querySelector(".progress").setAttribute("style","display:none")}function progress_start(){document.querySelector(".progress").setAttribute("style","display:block")}async function read(e){return await fetch(e,{mode:"cors"}).then(e=>e.text())}